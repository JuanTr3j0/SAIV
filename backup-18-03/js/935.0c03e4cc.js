"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[935],{1961:function(a,e,o){o.r(e),o.d(e,{default:function(){return Za}});var r=o(3396),l=o(7139),n=o(9242);const s={class:"container flex-grow-1 container-p-y"},t={class:"fw-bold py-3 mb-4"},i={class:"text-muted fw-light text-center"},d={class:"card"},c={class:"card-body"},u=["disabled"],b=(0,r._)("i",{class:"bx bx-plus",style:{"font-size":"20px"}},null,-1),h={class:"col-md-4"},v={class:"input-group border-primary flex justify-content-end"},m=(0,r._)("span",{class:"input-group-text border-primary bg-primary text-white text-center border-whiteñ{klñ}",for:"tipo-caso"},[(0,r.Uk)("Tipo Caso"),(0,r._)("i",{class:"bx bxs-label"})],-1),g=["value","selected"],p={class:"text-nowrap fw-bold"},w={class:"text-nowrap fw-bold"},f={class:"text-nowrap"},x={class:"text-nowrap"},y={class:"text-nowrap"},C={class:"text-nowrap"},k={class:"text-nowrap"},_={class:"text-nowrap"},A={id:"acciones",style:{padding:"0%"},class:"text-center"};function H(a,e,o,H,D,V){const z=(0,r.up)("AccionesTable"),R=(0,r.up)("TableVue"),Z=(0,r.up)("ArchivosVue"),B=(0,r.up)("Modal"),T=(0,r.up)("FormCaso"),U=(0,r.up)("AdvertenciaVue");return(0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("h4",t,[(0,r._)("span",i,"SAIV"+(0,l.zw)(a.store.state.USUARIO.oficina)+" /",1),(0,r.Uk)(" Registro de Casos ")]),(0,r._)("div",d,[(0,r._)("div",c,[(0,r.Wm)(R,{ref:"tablaCasosRef",columnas:a.columnas,url:a.urlTabla,onHandleChangedLoading:a.handleChangedLoading,onHandleChangedData:a.handleChangedData},{button:(0,r.w5)((()=>[(0,r._)("button",{class:"btn btn-primary m-1 justify-items-start",onClick:e[0]||(e[0]=(...e)=>a.handleClickNuevo&&a.handleClickNuevo(...e)),disabled:a.loading},[b,(0,r.Uk)(" Nuevo ")],8,u)])),row2:(0,r.w5)((()=>[(0,r._)("div",h,[(0,r._)("div",v,[m,(0,r.wy)((0,r._)("select",{class:"form-select bg-primary text-white",id:"tipo-caso","onUpdate:modelValue":e[1]||(e[1]=e=>a.tipoCaso=e),onChange:e[2]||(e[2]=e=>a.tablaCasosRef.handleChangeFiltro(a.tipoCaso))},[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(["Todos","Denuncia","Sin Denuncia","Diligencia"],(a=>(0,r._)("option",{key:a,class:"bg-primary text-white",value:a,selected:a===a.sexo},(0,l.zw)(a),9,g))),64))],544),[[n.bM,a.tipoCaso]])])])])),tbody:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.data,((e,o)=>((0,r.wg)(),(0,r.iD)("tr",{key:o},[(0,r._)("td",p,[(0,r._)("span",null,(0,l.zw)(e.codigo),1)]),(0,r._)("td",w,[(0,r._)("span",null,(0,l.zw)(e.fechaRegistro),1)]),(0,r._)("td",f,(0,l.zw)(e.tiposViolencia??"No seleccionado"),1),(0,r._)("td",x,(0,l.zw)(e.modalidadViolencia??"No seleccionado"),1),(0,r._)("td",y,(0,l.zw)(e.institucionRemitente??"No seleccionado"),1),(0,r._)("td",C,(0,l.zw)(e.fechaHecho??"No ingresado"),1),(0,r._)("td",k,(0,l.zw)(e.departamento??"No seleccionado"),1),(0,r._)("td",_,(0,l.zw)(e.municipio??"No seleccionado"),1),(0,r._)("td",A,[(0,r.Wm)(z,{json:e,loading:a.loading,showArchivos:!0,showEditar:!0,showBorrar:!0,showVer:!0,onHandleClickVer:o=>a.handleClickVer(e),onHandleClickArchivos:o=>a.handleClickArchivos(e),onHandleClickEditar:o=>a.handleClickEditar(e),onHandleClickBorrar:o=>a.handleClickBorrar(e)},null,8,["json","loading","onHandleClickVer","onHandleClickArchivos","onHandleClickEditar","onHandleClickBorrar"])])])))),128))])),_:1},8,["columnas","url","onHandleChangedLoading","onHandleChangedData"])])]),(0,r.Wm)(B,{ref:"modalArchivosCasosRef",size:""},{cardBody:(0,r.w5)((()=>[(0,r.Wm)(Z,{ref:"ArchivosCasosRef",onHandledDescargarArchivo:a.handledDescargarArchivo,onHandledBorrarArchivo:a.handledBorrarArchivo,loading:a.loading},null,8,["onHandledDescargarArchivo","onHandledBorrarArchivo","loading"])])),_:1},512),(0,r.Wm)(B,{ref:"modalCasoRef",onHandleActualizarDatosTabla:a.handleActualizarDatos},{cardBody:(0,r.w5)((()=>[(0,r.Wm)(T,{ref:"formCasoRef",onHandleActualizarDatosTabla:a.handleActualizarDatos,onHandledDescargarArchivo:a.handledDescargarArchivo,onHandledBorrarArchivo:a.handledBorrarArchivoCaso,loading:a.loading,showVer:a.showVer??!1},null,8,["onHandleActualizarDatosTabla","onHandledDescargarArchivo","onHandledBorrarArchivo","loading","showVer"])])),_:1},8,["onHandleActualizarDatosTabla"]),(0,r.Wm)(B,{ref:"modalCasoBorrarRef"},{cardBody:(0,r.w5)((()=>[(0,r.Wm)(U,{ref:"advertenciaRef",mensaje:"El siguiente caso se borrara de la base de datos, ¿continuar?",onContinuar:a.borrarCaso},null,8,["onContinuar"])])),_:1},512)])}var D=o(4870),V=o(2589);const z=a=>((0,r.dD)("data-v-3a2107d6"),a=a(),(0,r.Cn)(),a),R={class:"card p-2"},Z={class:"border border-primary border-3 rounded-2 text-center p-3"},B={key:0},T={class:"container-fluid p-1 mt-3"},U=z((()=>(0,r._)("h5",null,"Archivos (Servidor)",-1))),M={class:"list-group border border-1 border-primary text-start"},S=["disabled","onClick"],N=z((()=>(0,r._)("i",{class:"bx bx-download"},null,-1))),F=["disabled"],j=z((()=>(0,r._)("i",{class:"bx bx-x"},null,-1))),E=z((()=>(0,r._)("div",{class:"dropdown-header"},[(0,r._)("h6",{class:"text-wrap text-nowrap"},[(0,r._)("strong",null,[(0,r.Uk)("Esta acción no se podra revertir,"),(0,r._)("br"),(0,r.Uk)(" ¿Continuar?")])])],-1))),W=["onClick","disabled"],I=z((()=>(0,r._)("i",{class:"bx bx-check"},null,-1))),K=["onClick","disabled"],L=z((()=>(0,r._)("i",{class:"bx bx-x"},null,-1))),P={class:"text-wrap text-nowrap mt-2 text-center"},Y=z((()=>(0,r._)("strong",null,[(0,r._)("i",{class:"bx bx-md bx-no-entry text-danger"}),(0,r.Uk)(" No existen archivos.")],-1))),J=[Y],O={class:"container-fluid text-end"},$=["disabled"],q=z((()=>(0,r._)("i",{class:"bx bx-exit"},null,-1)));function Q(a,e,o,s,t,i){const d=(0,r.up)("Popper"),c=(0,r.Q2)("auto-animate");return(0,r.wg)(),(0,r.iD)("div",R,[(0,r._)("div",Z,[a.titulo?((0,r.wg)(),(0,r.iD)("h4",B,[(0,r._)("strong",null,(0,l.zw)(a.titulo),1)])):(0,r.kq)("",!0),(0,r._)("div",T,[U,(0,r.wy)(((0,r.wg)(),(0,r.iD)("ul",M,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.archivos,(e=>((0,r.wg)(),(0,r.iD)("li",{class:"list-group-item",key:e.key},[(0,r._)("div",null,[(0,r._)("strong",null,(0,l.zw)(e.nombre_original),1)]),(0,r._)("div",null,[(0,r._)("button",{class:"btn btn-sm btn-success rounded-3 m-1",disabled:a.loading,onClick:o=>a.$emit("handledDescargarArchivo",e.key,e.nombre_original)},[(0,r.Uk)(" Descargar "),N],8,S),(0,r.Wm)(d,{class:"popper-theme text-start",arrow:""},{content:(0,r.w5)((({close:o})=>[E,(0,r._)("button",{class:"dropdown-item text-start-center",onClick:r=>{a.handledBorrarArchivo(e.key),o()},disabled:a.loading},[I,(0,r.Uk)(" Continuar ")],8,W),(0,r._)("button",{class:"dropdown-item text-start-center",onClick:a=>{o()},disabled:a.loading},[L,(0,r.Uk)(" Cancelar ")],8,K)])),default:(0,r.w5)((()=>[(0,r._)("button",{class:"btn btn-sm btn-danger rounded-3 m-1",disabled:a.loading},[(0,r.Uk)(" Eliminar "),j],8,F)])),_:2},1024)])])))),128)),(0,r.wy)((0,r._)("h5",P,J,512),[[n.F8,0===a.archivos.length]])])),[[c]])])]),(0,r._)("div",O,[(0,r._)("button",{type:"button",class:"btn btn-secondary m-1 mt-3",disabled:a.loading,"data-bs-dismiss":"modal"},[q,(0,r.Uk)(" Salir ")],8,$)])])}var G=o(3758),X=(0,r.aZ)({props:["loading"],setup:(a,{emit:e})=>{const o=(0,D.iH)(null),r=(0,D.iH)(null),l=(0,D.iH)([]),n=a=>l.value=a,s=a=>o.value=a,t=a=>r.value=a,i=a=>e("handledBorrarArchivo",r.value,a);return{archivos:l,titulo:o,key:r,handledBorrarArchivo:i,cargarArchivos:n,cargarTitulo:s,cargarKey:t}},components:{Popper:G.Z}}),aa=o(89);const ea=(0,aa.Z)(X,[["render",Q],["__scopeId","data-v-3a2107d6"]]);var oa=ea,ra=o(4650),la=o(1078);const na={class:"modal fade",ref:"modalArchivos",id:"backDropModal","data-bs-backdrop":"static",tabindex:"-1"},sa=(0,r.uE)('<div class="modal-dialog modal-center"><form class="modal-content"><div class="modal-header"><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><ul class="list-group"><li class="list-group-item d-flex align-items-center"><div class="row"><div class="col-md-10"><i class="bx bx-file me-2"></i><span></span></div><div class="col-md-2 float-end text-center row"><button class="btn btn-sm btn-primary m-1"><i class="bx bx-download"></i></button><button class="btn btn-sm btn-danger m-1"><i class="bx bx-x"></i></button></div></div></li></ul></div></form></div>',1),ta=[sa];function ia(a,e,o,l,n,s){return(0,r.wg)(),(0,r.iD)("div",na,ta,512)}var da=o(2166),ca=o(8419),ua=(0,r.aZ)({props:["archivos","titulo"],setup(a){const e=(0,D.iH)(null),o=(0,D.iH)(a.archivos),r=(0,D.iH)(a.titulo),l=(0,D.iH)([]),n=()=>{new da.u_(e.value).show()},s=a=>{l.value=a,l??=[]};return{tituloP:r,archivosP:o,modalArchivos:e,showModal:n,cargarArchivos:s}}});const ba=(0,aa.Z)(ua,[["render",ia]]);var ha=ba;const va={class:"p-2 rounded-2 border border-primary border-2"},ma={class:""},ga={class:"mt-3 float-end"},pa=["disabled"],wa=(0,r._)("i",{class:"bx bx-exit"},null,-1),fa=["disabled"];function xa(a,e,o,n,s,t){return(0,r.wg)(),(0,r.iD)("div",va,[(0,r._)("h4",ma,(0,l.zw)(a.mensaje),1),(0,r._)("div",ga,[(0,r._)("button",{type:"button",class:"btn btn-secondary m-1",disabled:a.loading??!1,"data-bs-dismiss":"modal"},[wa,(0,r.Uk)(" Salir")],8,pa),(0,r._)("button",{type:"button",class:"btn btn-primary m-1","data-bs-dismiss":"modal",onClick:e[0]||(e[0]=()=>{a.$emit("continuar",a.json.key)}),disabled:a.loading??!1},[(0,r._)("i",{class:(0,l.C_)(["bx",{"bx-check":!a.loading,"bx-spin bx-loader":a.loading}])},null,2),(0,r.Uk)(" Continuar ")],8,fa)])])}var ya=(0,r.aZ)({props:["mensaje","loading"],setup:(a,{emit:e})=>{const o=(0,D.iH)(null),r=a=>{console.log(a.key),o.value=a};return{json:o,setJson:r}}});const Ca=(0,aa.Z)(ya,[["render",xa]]);var ka=Ca,_a=o(4073),Aa=o(7866),Ha=o(4009),Da=o(4239);const Va=[{nombre:"Codigo",class:"text-center bg-primary text-white fw-bold",key:"codigo",style:""},{nombre:"Fecha Registro",class:"text-center bg-label-primary text-white fw-bold",key:"fechaRegistro",style:""},{nombre:"Violencia",class:"text-center bg-label-primary text-white fw-bold",key:"tiposViolencia"},{nombre:"Mod. Violencia",class:"text-center bg-label-primary text-white fw-bold",key:"modalidadViolencia"},{nombre:"Instit. Remitente",class:"text-center bg-label-primary text-white fw-bold",key:"institucionRemitente"},{nombre:"Fecha Hecho",class:"text-center bg-label-primary text-white fw-bold",key:"fechaHecho"},{nombre:"Departamento",class:"text-center bg-label-primary text-white fw-bold",key:"departamento"},{nombre:"Municipio",class:"text-center bg-label-primary text-white fw-bold",key:"municipio"},{nombre:"Acciones",class:"bg-primary text-white fw-bold text-center",key:"acciones",style:""}];var za=(0,r.aZ)({name:"casosView",components:{Modal:V.Z,FormCaso:la.Z,TableVue:ra.Z,modalArchivos:ha,AccionesTable:_a.Z,ArchivosVue:oa,AdvertenciaVue:ka,FormSelectOpcionVue:Aa.Z},setup(){const a=(0,D.iH)([]),e=(0,D.iH)(!0),o=(0,D.iH)(!1),r=(0,D.iH)("Todos"),l=(0,D.iH)(null),n=(0,D.iH)(null),s=(0,D.iH)(null),t=(0,D.iH)(null),i=(0,D.iH)(null),d=(0,D.iH)(null),c=(0,D.iH)(null),u=(0,D.iH)(null),b=a=>e.value=a,h=e=>{a.value=e},v=a=>{e.value=a},m=()=>{o.value=null,n.value.resetForm(),l.value.showModal()},g=async(a,e)=>{try{await Ha.Z.descargarArchivo("saiv/archivos/descargar/"+a,e)}catch(o){console.log(o)}},p=a=>{o.value=!0,_(a)},w=a=>{o.value=null,_(a)},f=a=>{t.value.setJson(a),d.value.showModal()},x=a=>y(a),y=async a=>{if("undefined"!==typeof a.key){b(!0);const e=await ca.Z.obtener("saiv/casos/obtener/"+a.key);i.value.cargarArchivos(e.archivosCasos),i.value.cargarKey(e.key),i.value.cargarTitulo(null===e?"":"Codigo: "+e.denuncia+" "+V(e.correlativo,3)+"-"+V(e.mes,2)+"-"+V(e.anio,4)),u.value.showModal(),b(!1)}},C=async(a,e)=>{try{if("undefined"!==typeof e&&"undefined"!==typeof a){b(!0),await ca.Z.borrar("saiv/archivos/caso/eliminar/"+e);const o=await ca.Z.obtener("saiv/casos/obtener/"+a);i.value.cargarArchivos(o.archivosCasos),b(!1)}}catch(o){console.log(o)}},k=async(a,e)=>{try{if(console.log("archivo -> "+e),"undefined"!==typeof e&&"undefined"!==typeof a){b(!0),await ca.Z.borrar("saiv/archivos/caso/eliminar/"+e);const o=await ca.Z.obtener("saiv/casos/obtener/"+a);n.value.cargarArchivos(o.archivosCasos),b(!1)}}catch(o){console.log(o)}},_=async a=>{if("undefined"!==typeof a.key){b(!0),n.value.resetForm();let e=await ca.Z.obtener("saiv/casos/obtener/"+a.key);for(let a=0;a<e.agresores.length;a++){const o=e.agresores[a];e.agresores[a].edadDesconocida=1===parseInt(o.edadDesconocida),e.agresores[a].nombreDesconocido=1===parseInt(o.nombreDesconocido)}const o=e;n.value.editForm(o),n.value.visibleTab("agresores",o.agresores.length>0),n.value.visibleTab("responsables",null!==o.responsable.key),l.value.showModal(),b(!1)}},A=()=>{b(!0),s.value.handleActualizarDatos(),b(!1)},H=async a=>{"undefined"!==typeof a&&(b(!0),await ca.Z.borrarCaso({key:a},"saiv/casos/borrar"),s.value.handleActualizarDatos(),b(!1))},V=(a,e)=>{if(null!==a){var o=Math.abs(a),r=a.toString().length,l="0";return e<=r?a<0?"-"+o.toString():o.toString():a<0?"-"+l.repeat(e-r)+o.toString():l.repeat(e-r)+o.toString()}return"?"};return{formCasoRef:n,modalCasoRef:l,modalCasoArchivosRef:c,tablaCasosRef:s,ArchivosCasosRef:i,modalArchivosCasosRef:u,modalCasoBorrarRef:d,advertenciaRef:t,data:a,showVer:o,loading:e,columnas:Va,tipoCaso:r,urlTabla:"saiv/casos/index",handleClickNuevo:m,handleChangedData:h,handleChangedLoading:v,handleActualizarDatos:A,handledDescargarArchivo:g,handledBorrarArchivo:C,handledBorrarArchivoCaso:k,borrarCaso:H,handleClickArchivos:x,handleClickVer:p,handleClickEditar:w,handleClickBorrar:f,store:Da.Z}}});const Ra=(0,aa.Z)(za,[["render",H]]);var Za=Ra}}]);
//# sourceMappingURL=935.0c03e4cc.js.map