"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[177],{4073:function(a,e,o){o.d(e,{Z:function(){return f}});var n=o(3396),r=o(7139);const s=a=>((0,n.dD)("data-v-fb412ae8"),a=a(),(0,n.Cn)(),a),t={style:{margin:"0%"}},l=["disabled"],i={key:0,class:"bx bx-dots-horizontal-rounded"},d={key:1,class:"spinner-grow spinner-grow-sm",role:"status"},c=s((()=>(0,n._)("span",{class:"visually-hidden"},"Cargando...",-1))),u=[c],b=["onClick"];function h(a,e,o,s,c,h){const v=(0,n.up)("Popper");return(0,n.wg)(),(0,n.iD)("div",t,[(0,n.Wm)(v,{class:"popper-theme text-start",arrow:""},{content:(0,n.w5)((({close:e})=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.botones,((o,s)=>((0,n.wg)(),(0,n.iD)(n.HY,{key:s},[o.show?((0,n.wg)(),(0,n.iD)("button",{class:"dropdown-item text-start-center",key:o.nombre,onClick:n=>{a.handleClick(o.metodo),e()}},[(0,n._)("i",{class:(0,r.C_)(["bx me-1",o.icon]),style:(0,r.j5)(o.style)},null,6),(0,n.Uk)(" "+(0,r.zw)(o.nombre),1)],8,b)):(0,n.kq)("",!0)],64)))),128))])),default:(0,n.w5)((()=>[(0,n._)("button",{type:"button",class:"btn p-0 dropdown-toggle hide-arrow border px-3 btn-primary",disabled:a.loading},[a.loading?((0,n.wg)(),(0,n.iD)("div",d,u)):((0,n.wg)(),(0,n.iD)("i",i))],8,l)])),_:1})])}var v=o(4870),m=o(3758),p=(0,n.aZ)({props:["loading","estado","json","showVer","showArchivos","showEditar","showBorrar","showEstado"],setup(a,{emit:e}){const o=(0,v.iH)(a.json),n=(0,v.iH)(a.estado),r=(0,v.iH)("undefined"!==typeof a.showVer),s=(0,v.iH)("undefined"!==typeof a.showArchivos),t=(0,v.iH)("undefined"!==typeof a.showEditar),l=(0,v.iH)("undefined"!==typeof a.showBorrar),i=(0,v.iH)("undefined"!==typeof a.showEstado),d="font-size:20px; ",c=a=>{e(a,o)};return{handleClick:c,botones:[{nombre:"Ver",icon:"bx-show ",show:r.value,metodo:"handleClickVer",style:d},{nombre:"Archivos",icon:"bx-file-find",show:s.value,metodo:"handleClickArchivos",style:d},{nombre:"Editar",icon:"bx-edit-alt",show:t.value,metodo:"handleClickEditar",style:d},{nombre:"Activo"===n.value?"Desactivar":"Activar",icon:"Activo"!==n.value?"bx-check":"bx-x",show:i.value,metodo:"handleClickEstado",style:d},{nombre:"Borrar",icon:"bx-trash",show:l.value,metodo:"handleClickBorrar",style:d}]}},components:{Popper:m.Z}}),g=o(89);const w=(0,g.Z)(p,[["render",h],["__scopeId","data-v-fb412ae8"]]);var f=w},9220:function(a,e,o){o.d(e,{Z:function(){return p}});var n=o(3396),r=o(7139);const s={class:"p-2 rounded-2 border border-primary border-2"},t={class:""},l={class:"mt-3 float-end"},i=["disabled"],d=(0,n._)("i",{class:"bx bx-exit"},null,-1),c=["disabled"];function u(a,e,o,u,b,h){return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("h4",t,(0,r.zw)(a.mensaje),1),(0,n._)("div",l,[(0,n._)("button",{type:"button",class:"btn btn-secondary m-1",disabled:a.loading??!1,"data-bs-dismiss":"modal"},[d,(0,n.Uk)(" Salir")],8,i),(0,n._)("button",{type:"button",class:"btn btn-primary m-1","data-bs-dismiss":"modal",onClick:e[0]||(e[0]=()=>{a.$emit("continuar",a.json.key)}),disabled:a.loading??!1},[(0,n._)("i",{class:(0,r.C_)(["bx",{"bx-check":!a.loading,"bx-spin bx-loader":a.loading}])},null,2),(0,n.Uk)(" Continuar ")],8,c)])])}var b=o(4870),h=(0,n.aZ)({props:["mensaje","loading"],setup:(a,{emit:e})=>{const o=(0,b.iH)(null),n=a=>{console.log(a.key),o.value=a};return{json:o,setJson:n}}}),v=o(89);const m=(0,v.Z)(h,[["render",u]]);var p=m},9623:function(a,e,o){o.r(e),o.d(e,{default:function(){return Ca}});var n=o(3396),r=o(7139),s=o(9242);const t={class:"container flex-grow-1 container-p-y"},l={class:"fw-bold py-3 mb-4"},i={class:"text-muted fw-light text-center"},d={class:"card"},c={class:"card-body"},u=["disabled"],b=(0,n._)("i",{class:"bx bx-plus",style:{"font-size":"20px"}},null,-1),h={class:"col-md-4"},v={class:"input-group border-primary flex justify-content-end"},m=(0,n._)("span",{class:"input-group-text border-primary bg-primary text-white text-center border-white",for:"tipo-caso"},[(0,n.Uk)("Tipo Caso"),(0,n._)("i",{class:"bx bxs-label"})],-1),p=["value"],g={class:"text-nowrap fw-bold"},w={class:"text-nowrap fw-bold"},f={class:"text-nowrap"},y={class:"text-nowrap"},x={class:"text-nowrap"},C={class:"text-nowrap"},k={class:"text-nowrap"},_={class:"text-nowrap"},A={id:"acciones",style:{padding:"0%"},class:"text-center"};function H(a,e,o,H,D,V){const Z=(0,n.up)("AccionesTable"),z=(0,n.up)("TableVue"),B=(0,n.up)("ArchivosVue"),R=(0,n.up)("Modal"),T=(0,n.up)("FormCaso"),U=(0,n.up)("AdvertenciaVue");return(0,n.wg)(),(0,n.iD)("div",t,[(0,n._)("h4",l,[(0,n._)("span",i,"SAIV"+(0,r.zw)(a.store.state.USUARIO.oficina)+" /",1),(0,n.Uk)(" Registro de Casos ")]),(0,n._)("div",d,[(0,n._)("div",c,[(0,n.Wm)(z,{ref:"tablaCasosRef",columnas:a.columnas,url:a.urlTabla,onHandleChangedLoading:a.handleChangedLoading,onHandleChangedData:a.handleChangedData},{button:(0,n.w5)((()=>[(0,n._)("button",{class:"btn btn-primary m-1 justify-items-start",onClick:e[0]||(e[0]=(...e)=>a.handleClickNuevo&&a.handleClickNuevo(...e)),disabled:a.loading},[b,(0,n.Uk)(" Nuevo ")],8,u)])),row2:(0,n.w5)((()=>[(0,n._)("div",h,[(0,n._)("div",v,[m,(0,n.wy)((0,n._)("select",{class:"form-select bg-primary text-white",id:"tipo-caso","onUpdate:modelValue":e[1]||(e[1]=e=>a.tipoCaso=e),onChange:e[2]||(e[2]=e=>a.tablaCasosRef.handleChangeFiltro(a.tipoCaso))},[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(["Todos","Denuncia","Sin Denuncia","Diligencia"],(a=>(0,n._)("option",{key:a,class:"bg-primary text-white",value:a},(0,r.zw)(a),9,p))),64))],544),[[s.bM,a.tipoCaso]])])])])),tbody:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.data,((e,o)=>((0,n.wg)(),(0,n.iD)("tr",{key:o},[(0,n._)("td",g,[(0,n._)("span",null,(0,r.zw)(e.codigo),1)]),(0,n._)("td",w,[(0,n._)("span",null,(0,r.zw)(e.fechaRegistro),1)]),(0,n._)("td",f,(0,r.zw)(e.tiposViolencia??"No seleccionado"),1),(0,n._)("td",y,(0,r.zw)(e.modalidadViolencia??"No seleccionado"),1),(0,n._)("td",x,(0,r.zw)(e.institucionRemitente??"No seleccionado"),1),(0,n._)("td",C,(0,r.zw)(e.fechaHecho??"No ingresado"),1),(0,n._)("td",k,(0,r.zw)(e.departamento??"No seleccionado"),1),(0,n._)("td",_,(0,r.zw)(e.municipio??"No seleccionado"),1),(0,n._)("td",A,[(0,n.Wm)(Z,{json:e,loading:a.loading,showArchivos:!0,showEditar:!0,showBorrar:!0,showVer:!0,onHandleClickVer:o=>a.handleClickVer(e),onHandleClickArchivos:o=>a.handleClickArchivos(e),onHandleClickEditar:o=>a.handleClickEditar(e),onHandleClickBorrar:o=>a.handleClickBorrar(e)},null,8,["json","loading","onHandleClickVer","onHandleClickArchivos","onHandleClickEditar","onHandleClickBorrar"])])])))),128))])),_:1},8,["columnas","url","onHandleChangedLoading","onHandleChangedData"])])]),(0,n.Wm)(R,{ref:"modalArchivosCasosRef",size:""},{cardBody:(0,n.w5)((()=>[(0,n.Wm)(B,{ref:"ArchivosCasosRef",onHandledDescargarArchivo:a.handledDescargarArchivo,onHandledBorrarArchivo:a.handledBorrarArchivo,loading:a.loading},null,8,["onHandledDescargarArchivo","onHandledBorrarArchivo","loading"])])),_:1},512),(0,n.Wm)(R,{ref:"modalCasoRef",onHandleActualizarDatosTabla:a.handleActualizarDatos},{cardBody:(0,n.w5)((()=>[(0,n.Wm)(T,{ref:"formCasoRef",onHandleActualizarDatosTabla:a.handleActualizarDatos,onHandledDescargarArchivo:a.handledDescargarArchivo,onHandledBorrarArchivo:a.handledBorrarArchivoCaso,loading:a.loading,showVer:a.showVer??!1},null,8,["onHandleActualizarDatosTabla","onHandledDescargarArchivo","onHandledBorrarArchivo","loading","showVer"])])),_:1},8,["onHandleActualizarDatosTabla"]),(0,n.Wm)(R,{ref:"modalCasoBorrarRef"},{cardBody:(0,n.w5)((()=>[(0,n.Wm)(U,{ref:"advertenciaRef",mensaje:"El siguiente caso se borrara de la base de datos, ¿continuar?",onContinuar:a.borrarCaso},null,8,["onContinuar"])])),_:1},512)])}var D=o(4870),V=o(2589);const Z=a=>((0,n.dD)("data-v-3a2107d6"),a=a(),(0,n.Cn)(),a),z={class:"card p-2"},B={class:"border border-primary border-3 rounded-2 text-center p-3"},R={key:0},T={class:"container-fluid p-1 mt-3"},U=Z((()=>(0,n._)("h5",null,"Archivos (Servidor)",-1))),E={class:"list-group border border-1 border-primary text-start"},j=["disabled","onClick"],M=Z((()=>(0,n._)("i",{class:"bx bx-download"},null,-1))),S=["disabled"],N=Z((()=>(0,n._)("i",{class:"bx bx-x"},null,-1))),F=Z((()=>(0,n._)("div",{class:"dropdown-header"},[(0,n._)("h6",{class:"text-wrap text-nowrap"},[(0,n._)("strong",null,[(0,n.Uk)("Esta acción no se podra revertir,"),(0,n._)("br"),(0,n.Uk)(" ¿Continuar?")])])],-1))),W=["onClick","disabled"],I=Z((()=>(0,n._)("i",{class:"bx bx-check"},null,-1))),K=["onClick","disabled"],P=Z((()=>(0,n._)("i",{class:"bx bx-x"},null,-1))),Y={class:"text-wrap text-nowrap mt-2 text-center"},L=Z((()=>(0,n._)("strong",null,[(0,n._)("i",{class:"bx bx-md bx-no-entry text-danger"}),(0,n.Uk)(" No existen archivos.")],-1))),q=[L],J={class:"container-fluid text-end"},O=["disabled"],$=Z((()=>(0,n._)("i",{class:"bx bx-exit"},null,-1)));function Q(a,e,o,t,l,i){const d=(0,n.up)("Popper"),c=(0,n.Q2)("auto-animate");return(0,n.wg)(),(0,n.iD)("div",z,[(0,n._)("div",B,[a.titulo?((0,n.wg)(),(0,n.iD)("h4",R,[(0,n._)("strong",null,(0,r.zw)(a.titulo),1)])):(0,n.kq)("",!0),(0,n._)("div",T,[U,(0,n.wy)(((0,n.wg)(),(0,n.iD)("ul",E,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.archivos,(e=>((0,n.wg)(),(0,n.iD)("li",{class:"list-group-item",key:e.key},[(0,n._)("div",null,[(0,n._)("strong",null,(0,r.zw)(e.nombre_original),1)]),(0,n._)("div",null,[(0,n._)("button",{class:"btn btn-sm btn-success rounded-3 m-1",disabled:a.loading,onClick:o=>a.$emit("handledDescargarArchivo",e.key,e.nombre_original)},[(0,n.Uk)(" Descargar "),M],8,j),(0,n.Wm)(d,{class:"popper-theme text-start",arrow:""},{content:(0,n.w5)((({close:o})=>[F,(0,n._)("button",{class:"dropdown-item text-start-center",onClick:n=>{a.handledBorrarArchivo(e.key),o()},disabled:a.loading},[I,(0,n.Uk)(" Continuar ")],8,W),(0,n._)("button",{class:"dropdown-item text-start-center",onClick:a=>{o()},disabled:a.loading},[P,(0,n.Uk)(" Cancelar ")],8,K)])),default:(0,n.w5)((()=>[(0,n._)("button",{class:"btn btn-sm btn-danger rounded-3 m-1",disabled:a.loading},[(0,n.Uk)(" Eliminar "),N],8,S)])),_:2},1024)])])))),128)),(0,n.wy)((0,n._)("h5",Y,q,512),[[s.F8,0===a.archivos.length]])])),[[c]])])]),(0,n._)("div",J,[(0,n._)("button",{type:"button",class:"btn btn-secondary m-1 mt-3",disabled:a.loading,"data-bs-dismiss":"modal"},[$,(0,n.Uk)(" Salir ")],8,O)])])}var G=o(3758),X=(0,n.aZ)({props:["loading"],setup:(a,{emit:e})=>{const o=(0,D.iH)(null),n=(0,D.iH)(null),r=(0,D.iH)([]),s=a=>r.value=a,t=a=>o.value=a,l=a=>n.value=a,i=a=>e("handledBorrarArchivo",n.value,a);return{archivos:r,titulo:o,key:n,handledBorrarArchivo:i,cargarArchivos:s,cargarTitulo:t,cargarKey:l}},components:{Popper:G.Z}}),aa=o(89);const ea=(0,aa.Z)(X,[["render",Q],["__scopeId","data-v-3a2107d6"]]);var oa=ea,na=o(1339),ra=o(2097);const sa={class:"modal fade",ref:"modalArchivos",id:"backDropModal","data-bs-backdrop":"static",tabindex:"-1"},ta=(0,n.uE)('<div class="modal-dialog modal-center"><form class="modal-content"><div class="modal-header"><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><ul class="list-group"><li class="list-group-item d-flex align-items-center"><div class="row"><div class="col-md-10"><i class="bx bx-file me-2"></i><span></span></div><div class="col-md-2 float-end text-center row"><button class="btn btn-sm btn-primary m-1"><i class="bx bx-download"></i></button><button class="btn btn-sm btn-danger m-1"><i class="bx bx-x"></i></button></div></div></li></ul></div></form></div>',1),la=[ta];function ia(a,e,o,r,s,t){return(0,n.wg)(),(0,n.iD)("div",sa,la,512)}var da=o(2166),ca=o(8419),ua=(0,n.aZ)({props:["archivos","titulo"],setup(a){const e=(0,D.iH)(null),o=(0,D.iH)(a.archivos),n=(0,D.iH)(a.titulo),r=(0,D.iH)([]),s=()=>{new da.u_(e.value).show()},t=a=>{r.value=a,r??=[]};return{tituloP:n,archivosP:o,modalArchivos:e,showModal:s,cargarArchivos:t}}});const ba=(0,aa.Z)(ua,[["render",ia]]);var ha=ba,va=o(9220),ma=o(4073),pa=o(1787),ga=o(4009),wa=o(4239);const fa=[{nombre:"Codigo",class:"text-center bg-primary text-white fw-bold",key:"codigo",style:""},{nombre:"Fecha Registro",class:"text-center bg-label-primary text-white fw-bold",key:"fechaRegistro",style:""},{nombre:"Violencia",class:"text-center bg-label-primary text-white fw-bold",key:"tiposViolencia"},{nombre:"Mod. Violencia",class:"text-center bg-label-primary text-white fw-bold",key:"modalidadViolencia"},{nombre:"Instit. Remitente",class:"text-center bg-label-primary text-white fw-bold",key:"institucionRemitente"},{nombre:"Fecha Hecho",class:"text-center bg-label-primary text-white fw-bold",key:"fechaHecho"},{nombre:"Departamento",class:"text-center bg-label-primary text-white fw-bold",key:"departamento"},{nombre:"Municipio",class:"text-center bg-label-primary text-white fw-bold",key:"municipio"},{nombre:"Acciones",class:"bg-primary text-white fw-bold text-center",key:"acciones",style:""}];var ya=(0,n.aZ)({name:"casosView",components:{Modal:V.Z,FormCaso:ra.Z,TableVue:na.Z,ArchivosVue:oa,modalArchivos:ha,AccionesTable:ma.Z,AdvertenciaVue:va.Z,FormSelectOpcionVue:pa.Z},setup(){const a=(0,D.iH)([]),e=(0,D.iH)(!0),o=(0,D.iH)(!1),n=(0,D.iH)("Todos"),r=(0,D.iH)(null),s=(0,D.iH)(null),t=(0,D.iH)(null),l=(0,D.iH)(null),i=(0,D.iH)(null),d=(0,D.iH)(null),c=(0,D.iH)(null),u=(0,D.iH)(null),b=a=>e.value=a,h=e=>{a.value=e},v=a=>{e.value=a},m=()=>{o.value=null,s.value.resetForm(),r.value.showModal()},p=async(a,e)=>{try{await ga.Z.descargarArchivo("saiv/archivos/descargar/"+a,e)}catch(o){console.log(o)}},g=a=>{o.value=!0,_(a)},w=a=>{o.value=null,_(a)},f=a=>{l.value.setJson(a),d.value.showModal()},y=a=>x(a),x=async a=>{if("undefined"!==typeof a.key){b(!0);const e=await ca.Z.obtener("saiv/casos/obtener/"+a.key);i.value.cargarArchivos(e.archivosCasos),i.value.cargarKey(e.key),i.value.cargarTitulo(null===e?"":"Codigo: "+e.denuncia+" "+V(e.correlativo,3)+"-"+V(e.mes,2)+"-"+V(e.anio,4)),u.value.showModal(),b(!1)}},C=async(a,e)=>{try{if("undefined"!==typeof e&&"undefined"!==typeof a){b(!0),await ca.Z.borrar("saiv/archivos/caso/eliminar/"+e);const o=await ca.Z.obtener("saiv/casos/obtener/"+a);i.value.cargarArchivos(o.archivosCasos),b(!1)}}catch(o){console.log(o)}},k=async(a,e)=>{try{if(console.log("archivo -> "+e),"undefined"!==typeof e&&"undefined"!==typeof a){b(!0),await ca.Z.borrar("saiv/archivos/caso/eliminar/"+e);const o=await ca.Z.obtener("saiv/casos/obtener/"+a);s.value.cargarArchivos(o.archivosCasos),b(!1)}}catch(o){console.log(o)}},_=async a=>{if("undefined"!==typeof a.key){b(!0),s.value.resetForm();let e=await ca.Z.obtener("saiv/casos/obtener/"+a.key);for(let a=0;a<e.agresores.length;a++){const o=e.agresores[a];e.agresores[a].edadDesconocida=1===parseInt(o.edadDesconocida),e.agresores[a].nombreDesconocido=1===parseInt(o.nombreDesconocido)}const o=e;s.value.editForm(o),s.value.visibleTab("agresores",o.agresores.length>0),s.value.visibleTab("responsables",null!==o.responsable.key),r.value.showModal(),b(!1)}},A=()=>{b(!0),t.value.handleActualizarDatos(),b(!1)},H=async a=>{"undefined"!==typeof a&&(b(!0),await ca.Z.borrarCaso({key:a},"saiv/casos/borrar"),t.value.handleActualizarDatos(),b(!1))},V=(a,e)=>{if(null!==a){var o=Math.abs(a),n=a.toString().length,r="0";return e<=n?a<0?"-"+o.toString():o.toString():a<0?"-"+r.repeat(e-n)+o.toString():r.repeat(e-n)+o.toString()}return"?"};return{formCasoRef:s,modalCasoRef:r,modalCasoArchivosRef:c,tablaCasosRef:t,ArchivosCasosRef:i,modalArchivosCasosRef:u,modalCasoBorrarRef:d,advertenciaRef:l,data:a,showVer:o,loading:e,columnas:fa,tipoCaso:n,urlTabla:"saiv/casos/index",handleClickNuevo:m,handleChangedData:h,handleChangedLoading:v,handleActualizarDatos:A,handledDescargarArchivo:p,handledBorrarArchivo:C,handledBorrarArchivoCaso:k,borrarCaso:H,handleClickArchivos:y,handleClickVer:g,handleClickEditar:w,handleClickBorrar:f,store:wa.Z}}});const xa=(0,aa.Z)(ya,[["render",H]]);var Ca=xa}}]);
//# sourceMappingURL=177.c408c11d.js.map