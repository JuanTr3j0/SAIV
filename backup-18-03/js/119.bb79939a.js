"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[119],{8419:function(e,o,r){var t=r(4239),a=r(1120),s=r(9874);o["Z"]={obtener:async e=>{let o=!1,r=null,l=null;return await fetch(t.Z.state.URL_SERVER+e,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:t.Z.state.HEADERS,redirect:"follow",referrerPolicy:"no-referrer"}).then((e=>{if(401===e.status)s.Z.error({title:"Error",description:"Acceso Denegado"}),localStorage.clear(),a.Z.push({name:"acceso"});else{if("undefined"!==typeof e&&e.ok)return e.ok?(console.log("Proceso Completado!"),o=e.ok,e.json()):null;console.log(t.Z.getters.erroresResponse(e))}})).then((e=>l=e)).catch((e=>{r=e})),s.Z.toasPeticionesHttp(l,r,o),l},actualizarCrear:async(e,o)=>{let r=null,l=!1,i=null,n=null;try{await fetch(t.Z.state.URL_SERVER+o,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:t.Z.state.HEADERS,redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)}).then((e=>{if(401===e.status)s.Z.error({title:"Error",description:"Acceso Denegado"}),localStorage.clear(),a.Z.push({name:"acceso"});else if("undefined"!==typeof e&&e.ok){if(e.ok)return l=e.ok,e.json()}else i=t.Z.getters.erroresResponse(e)})).then((function(e){r=e})).catch((e=>{i=e}))}catch(c){n=c}return s.Z.toasPeticionesHttp(r,i,l),{json:r,ok:l,exception:n}},borrar:async(e,o)=>{let r=null,l=!1,i=null;await fetch(t.Z.state.URL_SERVER+o,{method:"DELETE",mode:"cors",cache:"default",credentials:"same-origin",headers:t.Z.state.HEADERS,redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)}).then((e=>(401===e.status?(s.Z.error({title:"Error",description:"Acceso Denegado"}),localStorage.clear(),a.Z.push({name:"acceso"})):"undefined"!==typeof e&&e.ok?e.ok&&console.log("Proceso Completado!"):console.log(t.Z.getters.erroresResponse(e)),l=e.ok,e.json()))).then((e=>{r=e})).catch((e=>{i=e})),s.Z.toasPeticionesHttp(r,i,l)},borrarCaso:async(e,o)=>{let r=null,l=!1,i=null;return await fetch(t.Z.state.URL_SERVER+o,{method:"DELETE",mode:"cors",cache:"default",credentials:"same-origin",headers:t.Z.state.HEADERS,redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)}).then((e=>(401===e.status?(s.Z.error({title:"Error",description:"Acceso Denegado"}),localStorage.clear(),a.Z.push({name:"acceso"})):"undefined"!==typeof e&&e.ok?e.ok&&console.log("Proceso Completado!"):console.log(t.Z.getters.erroresResponse(e)),l=e.ok,e.json()))).then((e=>{r=e})).catch((e=>{i=e})),s.Z.toasPeticionesHttp(r,i,l),{_json:r,error:i,ok:l}},borrar:async e=>{let o=null,r=!1,l=null;return await fetch(t.Z.state.URL_SERVER+e,{method:"DELETE",mode:"cors",cache:"default",credentials:"same-origin",headers:t.Z.state.HEADERS,redirect:"follow",referrerPolicy:"no-referrer"}).then((e=>(401===e.status?(s.Z.error({title:"Error",description:"Acceso Denegado"}),localStorage.clear(),a.Z.push({name:"acceso"})):"undefined"!==typeof e&&e.ok?e.ok&&console.log("Proceso Completado!"):console.log(t.Z.getters.erroresResponse(e)),r=e.ok,e.json()))).then((e=>{o=e})).catch((e=>{l=e})),{json:o,ok:r}}}},8830:function(e,o,r){r.r(o),r.d(o,{default:function(){return L}});var t=r(3396),a=r(7139);const s={class:"container-fluid flex-grow-1 container-p-y"},l={class:"fw-bold py-3 mb-4"},i={class:"text-muted fw-light text-center"},n=(0,t.Uk)(" Reportes "),c={class:"card"},d={class:"card-body",style:{display:"100% !important"}},p={class:"row"};function u(e,o,r,u,g,h){const m=(0,t.up)("CardReporte"),E=(0,t.Q2)("auto-animate");return(0,t.wg)(),(0,t.iD)("div",s,[(0,t._)("h4",l,[(0,t._)("span",i,"SAIV"+(0,a.zw)(u.store.state.USUARIO.oficina)+" /",1),n]),(0,t._)("div",c,[(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",d,[(0,t._)("div",p,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(g.reporteNames,(e=>((0,t.wg)(),(0,t.iD)("div",{class:"col-md-4 m-1 border border-black border-primary rounded border-3",key:e},[(0,t.Wm)(m,{reporteName:e},null,8,["reporteName"])])))),128))])])),[[E,{duration:250}]])])])}var g=r(9242);const h={class:"m-3 text-center"},m=(0,t._)("i",{class:"bx bxs-report text-primary",style:{"font-size":"5rem"}},null,-1),E={class:"strong text-primary"},b={class:"input-group input-group mb-2"},R=(0,t._)("span",{class:"input-group-text border-primary bg-primary fw-bold text-white text-center border-white",for:"tipo-caso"},[(0,t.Uk)("Seleccionar"),(0,t._)("i",{class:"bx bxs-label"})],-1),f=["disabled","onUpdate:modelValue"],y={key:0,class:"input-group input-group mb-2"},w=(0,t._)("span",{class:"input-group-text border-primary bg-primary fw-bold text-white text-center border-white",for:"tipo-caso"},[(0,t.Uk)(" Meses"),(0,t._)("i",{class:"bx bxs-label"})],-1),v=["disabled","onUpdate:modelValue"],x={class:"input-group input-group mb-2"},S=(0,t._)("span",{class:"input-group-text border-primary bg-primary fw-bold text-white text-center border-white",for:"tipo-caso"},[(0,t.Uk)(" Periodos"),(0,t._)("i",{class:"bx bxs-label"})],-1),U=["onUpdate:modelValue","disabled"],Z={class:"row px-2 mb-3"},k=["onClick","disabled"];function A(e,o,r,s,l,i){const n=(0,t.Q2)("auto-animate");return(0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.reportesJson,(e=>(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",{key:e.name},[(0,t._)("div",h,[m,(0,t._)("h1",E,"Reportes "+(0,a.zw)(r.reporteName),1)]),(0,t._)("div",b,[R,(0,t.wy)((0,t._)("select",{class:"form-select bg-label-primary border-primary text-white",disabled:s.loading,id:"table-opciones-id","onUpdate:modelValue":o=>e.tipo=o,onChange:o[0]||(o[0]=()=>{})},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.tipos,(e=>((0,t.wg)(),(0,t.iD)("option",{key:e,class:"bg-label-primary text-white fw-bold"},(0,a.zw)(e),1)))),128))],40,f),[[g.bM,e.tipo]])]),"MENSUAL"===e.tipo?((0,t.wg)(),(0,t.iD)("div",y,[w,(0,t.wy)((0,t._)("select",{class:"form-select bg-label-primary border-primary text-white",id:"table-opciones-id",disabled:s.loading,"onUpdate:modelValue":o=>e.mes=o,onChange:o[1]||(o[1]=e=>{s.handleChangePeriodo()})},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.meses,(e=>((0,t.wg)(),(0,t.iD)("option",{key:e,class:"bg-label-primary text-white fw-bold"},(0,a.zw)(e),1)))),128))],40,v),[[g.bM,e.mes]])])):(0,t.kq)("",!0),(0,t._)("div",x,[S,(0,t.wy)((0,t._)("select",{class:"form-select bg-label-primary border-primary text-white",id:"table-opciones-id","onUpdate:modelValue":o=>e.periodo=o,onChange:o[2]||(o[2]=e=>{s.handleChangePeriodo()}),disabled:s.loading},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(s.periodos??[],(e=>((0,t.wg)(),(0,t.iD)("option",{key:e,class:"bg-label-primary text-white fw-bold"},(0,a.zw)(e),1)))),128))],40,U),[[g.bM,e.periodo]])]),(0,t._)("div",Z,[(0,t._)("button",{type:"button",class:"btn-primary mt-2 mb-1 btn btn-block",onClick:o=>s.descargarExcel(e),style:{width:"100%"},disabled:s.loading},[(0,t._)("i",{class:(0,a.C_)(["bx bxs-download",s.loading?"bx-spin bx-loader-alt":" bxs-download"])},null,2),(0,t.Uk)(" "+(0,a.zw)(s.loading?"Espere...":"Descargar"),1)],8,k)])])),[[n,{duration:250}]]))),128)}var C=r(4239),_=r(4870),O=r(8419),D=r(4009),N={name:"CardReporte",props:{icon:{require:!0},reporteName:{type:String,required:!0}},setup(e){const o=(0,_.iH)(null),r=(0,_.iH)(["prueba"]),a=(0,_.iH)([]),s=(0,_.iH)(null),l=(0,_.iH)(!1),i=((0,_.iH)(""),(0,_.iH)(["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"]));(0,t.bv)((async()=>{l.value=!0,await c(),l.value=!1}));const n=(0,_.iH)([{name:e.reporteName,periodos:a.value,tipos:["MENSUAL","PRIMER TRIMESTRE","SEGUNDO TRIMESTRE","TERCER TRIMESTRE","CUARTO TRIMESTRE","ANUAL"],tipo:"ANUAL",mes:"ENERO",periodo:null}]),c=async()=>{console.log(e.reporteName);try{const e=await O.Z.obtener("saiv/casos/periodos");a.value=e??[],n.value[0].periodo=a.value.length>0?a.value[0]:null}catch(o){console.log(o)}},d=async()=>{},p=async e=>{l.value=!0,console.log("modulo: "+e.name),console.log(i.value.findIndex((o=>o===e.mes))+1);let o="REPORTE_"+e.name.toUpperCase()+"_"+("MENSUAL"===e.tipo?e.mes:e.tipo)+"_"+e.periodo;try{await D.Z.descargarArchivo("saiv/descargar/excel/reporte/"+e.name.toUpperCase()+"/"+e.tipo+"/"+(parseInt(i.value.findIndex((o=>o===e.mes)))+1)+"/"+e.periodo,o+".xls"),l.value=!1}catch(r){console.log(r)}finally{l.value=!1}};return{opciones:r,periodos:a,periodo:o,select:s,loading:l,meses:i,store:C.Z,reportesJson:n,handleChangePeriodo:d,descargarExcel:p}},watch:{periodos(e){(e??0===[].length)&&(this.periodo=null),(e??[]).length>0&&(this.periodo=this.periodos[0]),this.handleChangePeriodo()}}},T=r(89);const H=(0,T.Z)(N,[["render",A]]);var I=H,M={components:{CardReporte:I},data(){return{reporteNames:["Casos","JurÃ­dico","Ludoteca","Gesell"],oficina:"Oficina Central"}},setup(e){const o=(0,_.iH)(null),r=(0,_.iH)(["prueba"]),a=(0,_.iH)([]),s=(0,_.iH)(null),l=(0,_.iH)(!1),i=(0,_.iH)(["ENERO","FEBRERO","MARZO","ABRIL","MAYO","JUNIO","JULIO","AGOSTO","SEPTIEMBRE","OCTUBRE","NOVIEMBRE","DICIEMBRE"]),n=(0,_.iH)([{periodos:a.value,tipos:["MENSUAL","PRIMER TRIMESTRE","SEGUNDO TRIMESTRE","TERCER TRIMESTRE","ANUAL"],tipo:"ANUAL",mes:"ENERO",periodo:null}]);(0,t.bv)((async()=>{l.value=!0,await c(),l.value=!1}));const c=async()=>{try{const e=await O.Z.obtener("saiv/casos/periodos");a.value=e??[],n.value[0].periodo=a.value.length>0?a.value[0]:null}catch(e){console.log(e)}},d=async()=>{},p=async e=>{l.value=!0;let o="REPORTE_"+e.name.toUpperCase()+"_"+("MENSUAL"===e.tipo?e.mes:e.tipo)+"_"+e.periodo;try{await D.Z.descargarArchivo("saiv/descargar/excel/reporte/"+e.name.toUpperCase()+"/"+e.tipo+"/"+i.value.findIndex(e.mes)+"1/"+e.periodo,o+".xls"),l.value=!1}catch(r){console.log(r)}finally{l.value=!1}};return{opciones:r,periodos:a,periodo:o,select:s,loading:l,meses:i,store:C.Z,reportesJson:n,handleChangePeriodo:d,descargarExcel:p}},watch:{periodos(e){(e??0===[].length)&&(this.periodo=null),(e??[]).length>0&&(this.periodo=this.periodos[0]),this.handleChangePeriodo()}}};const P=(0,T.Z)(M,[["render",u]]);var L=P}}]);
//# sourceMappingURL=119.bb79939a.js.map